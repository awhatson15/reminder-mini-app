global:
  resolve_timeout: 5m

route:
  group_by: ['alertname', 'job']
  group_wait: 30s
  group_interval: 5m
  repeat_interval: 4h
  receiver: 'telegram-notifications'
  routes:
    - match:
        severity: critical
      receiver: 'telegram-critical'
      continue: true
    - match:
        severity: warning
      receiver: 'telegram-notifications'

receivers:
  - name: 'telegram-critical'
    telegram_configs:
      - bot_token: '${TELEGRAM_BOT_TOKEN}'
        chat_id: ${TELEGRAM_CHAT_ID_CRITICAL}
        parse_mode: 'HTML'
        message: |
          üö® <b>–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –¢–†–ï–í–û–ì–ê!</b> üö®
          <b>–ê–≤–∞—Ä–∏–π–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è:</b> {{ .CommonAnnotations.summary }}
          <b>–û–ø–∏—Å–∞–Ω–∏–µ:</b> {{ .CommonAnnotations.description }}
          <b>–í—Ä–µ–º—è:</b> {{ .StartsAt.Format "02.01.2006 15:04:05" }}
          <b>–°–µ—Ä–≤–µ—Ä:</b> {{ range .Alerts }}{{ .Labels.instance }}{{ end }}

  - name: 'telegram-notifications'
    telegram_configs:
      - bot_token: '${TELEGRAM_BOT_TOKEN}'
        chat_id: ${TELEGRAM_CHAT_ID}
        parse_mode: 'HTML'
        message: |
          ‚ö†Ô∏è <b>–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ</b> ‚ö†Ô∏è
          <b>–°–æ–±—ã—Ç–∏–µ:</b> {{ .CommonAnnotations.summary }}
          <b>–û–ø–∏—Å–∞–Ω–∏–µ:</b> {{ .CommonAnnotations.description }}
          <b>–í—Ä–µ–º—è:</b> {{ .StartsAt.Format "02.01.2006 15:04:05" }}
          <b>–°–µ—Ä–≤–µ—Ä:</b> {{ range .Alerts }}{{ .Labels.instance }}{{ end }}

inhibit_rules:
  - source_match:
      severity: 'critical'
    target_match:
      severity: 'warning'
    equal: ['alertname', 'instance'] 